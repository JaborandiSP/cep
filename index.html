<!DOCTYPE html>
<html lang="pt-br">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-09B2K29XXV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-09B2K29XXV');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6493068451182223"
     crossorigin="anonymous">
</script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Guia Jaborandi - CEPs</title>

<style>
body{
    margin:0;
    font-family: Arial, Helvetica, sans-serif;
    background:#f2f2f2;
}

header{
    background:#c62828;
    color:white;
    padding:15px;
    text-align:center;
    font-size:20px;
    font-weight:bold;
}

.subtitulo{
    font-size:14px;
    font-weight:normal;
}

.container{
    padding:15px;
}

.search-box{
    display:flex;
    margin-bottom:10px;
}

.search-box input{
    flex:1;
    padding:12px;
    border-radius:8px 0 0 8px;
    border:1px solid #ccc;
    font-size:16px;
}

.search-box button{
    padding:12px 15px;
    border:none;
    background:#1565c0;
    color:white;
    border-radius:0 8px 8px 0;
}

.result-count{
    font-size:14px;
    margin-bottom:10px;
    color:#555;
}

.card{
    background:white;
    padding:15px;
    border-radius:10px;
    margin-bottom:12px;
    box-shadow:0 2px 6px rgba(0,0,0,0.1);
}

.cep{
    font-weight:bold;
    color:#c62828;
    margin-top:5px;
}

.highlight{
    background:#ffeb3b;
    padding:0;
    border-radius:3px;
}

footer{
    text-align:center;
    padding:20px;
    font-size:14px;
    background:#eeeeee;
}
</style>
</head>

<body>

<header>
GUIA JABORANDI
<div class="subtitulo">CEPs de Jaborandi/SP</div>
</header>

<div class="container">

<div class="search-box">
<input type="text" id="search" placeholder="Buscar rua, bairro ou CEP...">
<button>ðŸ”Ž</button>
</div>

<div class="result-count" id="contador"></div>

<div id="results"></div>

</div>

<footer>
Sobre â€¢ Anuncie â€¢ Contato
</footer>

<script>

// ================= NORMALIZAR =================
function normalizar(texto){
    return texto
        .toLowerCase()
        .normalize("NFD")
        .replace(/[\u0300-\u036f]/g, "");
}

// ================= ESCAPAR REGEX =================
function escaparRegex(texto){
    return texto.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
}

// ================= DESTACAR =================
function destacar(textoOriginal, termoBusca){

    if(!termoBusca) return textoOriginal;

    let palavras = normalizar(termoBusca)
        .split(" ")
        .filter(p => p.length > 1);

    let resultado = textoOriginal;

    palavras.forEach(p => {
        let regex = new RegExp("(" + escaparRegex(p) + ")", "gi");
        resultado = resultado.replace(regex, '<span class="highlight">$1</span>');
    });

    return resultado;
}

// ================= SINÃ”NIMOS =================
const sinonimos = {
    "av": "avenida",
    "r": "rua",
    "pca": "praca",
    "pÃ§a": "praca",
    "dr": "doutor",
    "jd": "jardim",
    "vl": "vila"
};

// ================= DADOS (EXEMPLO) =================
const dados = [
{logradouro:"Avenida Jaime Nicolau Martins", bairro:"Centro", cep:"14775-021"},
{logradouro:"Rua 15 de Novembro", bairro:"Centro", cep:"14775-001"},
{logradouro:"Rua 7 de Setembro", bairro:"SÃ£o Benedito", cep:"14775-388"},
{logradouro:"PraÃ§a SÃ£o Benedito", bairro:"SÃ£o Benedito", cep:"14775-376"},
{logradouro:"Rua Luiz Daniel", bairro:"Centro", cep:"14775-011"}
];

// ================= RENDER =================
const resultsDiv = document.getElementById("results");
const contador = document.getElementById("contador");
const searchInput = document.getElementById("search");

function render(lista, termoBusca=""){
    resultsDiv.innerHTML="";
    contador.innerHTML = lista.length + " resultado(s) encontrado(s)";

    lista.forEach(item=>{
        resultsDiv.innerHTML += `
        <div class="card">
            <strong>${destacar(item.logradouro, termoBusca)}</strong><br>
            ${destacar(item.bairro, termoBusca)}
            <div class="cep">CEP: ${destacar(item.cep, termoBusca)}</div>
        </div>
        `;
    });
}

render(dados);

// ================= BUSCA =================
searchInput.addEventListener("input", function(){

    const termoOriginal = this.value.trim();
    let termoNormalizado = normalizar(termoOriginal);

    let palavras = termoNormalizado
        .split(" ")
        .filter(p => p.length > 0)
        .map(p => sinonimos[p] || p);

    const filtrado = dados.filter(item => {

        const textoCompleto = normalizar(
            item.logradouro + " " + item.bairro + " " + item.cep
        );

        return palavras.every(p => textoCompleto.includes(p));
    });

    render(filtrado, termoOriginal);
});

</script>

</body>
</html>

